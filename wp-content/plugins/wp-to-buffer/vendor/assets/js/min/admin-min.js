jQuery(document).ready(function($){var t=!1,e=function(){t||$("div.sub-panel").each(function(){if("block"==$(this).css("display")){var e=this,a=[];$("div.status textarea",$(e)).each(function(){a.push($(this).val())}),t=!0,$.post(wp_to_social_pro.ajax,{action:wp_to_social_pro.character_count_action,post_id:wp_to_social_pro.post_id,statuses:a,nonce:wp_to_social_pro.character_count_nonce},function(a){$("div.status textarea",$(e)).each(function(t){$("span.character-count",$(this).parent()).text(a.data.parsed_statuses[t].length)}),t=!1})}})};$(".nav-tab-wrapper a",$(wp_to_social_pro.character_count_metabox)).on("click",function(t){e()}),$('input[type="checkbox"]',$(wp_to_social_pro.character_count_metabox)).on("change",function(t){e()}),$("div.status textarea",$(wp_to_social_pro.character_count_metabox)).on("change",function(t){e()}),$("a.button.add-status",$(wp_to_social_pro.character_count_metabox)).on("change",function(t){e()}),$("a.clear-log").on("click",function(t){t.preventDefault();var e=$(this);if(void 0!==typeof $(e).data("action")&&void 0!==$(e).data("target")){confirm(wp_to_social_pro.clear_log_message)&&$.post(wp_to_social_pro.ajax,{action:$(e).data("action"),post:$("input[name=post_ID]").val(),nonce:wp_to_social_pro.clear_log_nonce},function(t){t.success?$("table.widefat tbody",$($(e).data("target"))).html('<tr><td colspan="3">'+wp_to_social_pro.clear_log_completed+"</td></tr>"):alert(t.data)})}});var a=function(){$("select.tags").each(function(){$(this).unbind("change.wp-to-social-pro").on("change.wp-to-social-pro",function(t){var e=$(this).val(),a=$(this).closest("div.status"),o=$("textarea",$(a)),s=$(o).val();$(o).val(s+=" "+e).trigger("change")})})};a();var o=function(t){$("select.wpzinc-selectize",$(t+"-panel")).selectize({valueField:"id",labelField:"text",searchField:"text",plugins:["drag_drop","remove_button"],delimiter:",",persist:!1,create:!1,load:function(t,e){if(!t.length||t.length<3)return e();var a=this.$input.data("action"),o=this.$input.data("taxonomy");$.ajax({url:wp_to_social_pro.ajax,data:{action:a,taxonomy:o,q:t,page:10},error:function(t,a,o){e()},success:function(t){e(t.data)}})},onChange:function(t){if(null===t||!t.length)return void $("input.term-ids",this.$input.closest("span.terms")).val("");$("input.term-ids",this.$input.closest("span.terms")).val(t.join())}})},s=function(){$("select.wpzinc-selectize").selectize().each(function(){this.selectize.destroy()})};$(".nav-tab-wrapper").on("change",function(t,e){"H3"==$(this).prop("tagName")&&(s(),o($(e).attr("href")))}),$("body").on("click","a.button.add-status",function(t){t.preventDefault(),s();var e=$(this),n=$(e).parent(),i=$(e).closest("div.statuses"),r=$(n).prev().html(),l=$(i).closest("div.sub-panel");$(n).before('<div class="option sortable">'+r+"</div>"),c($(i)),$("div.statuses").sortable("refresh"),$("input,select").conditional(),a(),o("#"+$(l).attr("id").replace("-panel",""))}),$("div.statuses").sortable({containment:"parent",items:".sortable",stop:function(t,e){var a=$(e.item),o=$(a).closest("div.statuses");c($(o))}});var n=function(){0!=$("select.schedule").length&&$("select.schedule").each(function(t){switch($(this).val()){case"custom":$("span.schedule",$(this).parent()).show(),$("span.custom",$(this).parent()).show(),$("span.custom_field",$(this).parent()).hide();break;case"custom_field":$("span.schedule",$(this).parent()).show(),$("span.custom",$(this).parent()).hide(),$("span.custom_field",$(this).parent()).show();break;default:$("span.schedule",$(this).parent()).hide(),$("span.custom",$(this).parent()).hide(),$("span.custom_field",$(this).parent()).hide();break}})};$("body").on("change","select.schedule",function(t){n()}),n(),$("div.statuses").bind("click.sortable mousedown.sortable",function(t){t.target.focus()}),$("div.sub-panel").on("click","a.delete",function(t){if(t.preventDefault(),confirm(wp_to_social_pro.delete_status_message)){var e=$(this).closest("div.option"),a=$(e).closest("div.statuses"),n=$(a).closest("div.sub-panel");$(e).remove(),c($(a)),s(),o("#"+$(n).attr("id").replace("-panel",""))}});var c=function(t){$("div.option.sortable",$(t)).each(function(t){$("div.number a.count ",$(this)).html("#"+(t+1)),0==t?$(this).addClass("first"):$(this).removeClass("first")})};$("input.datepicker").datepicker({dateFormat:"yy-mm-dd",maxDate:0}),$("a.button.add-table-row").on("click",function(t){t.preventDefault();var e=$(this),a=$(e).closest("table"),o=$("tbody tr:first-child",$(a));$("tbody tr:last-child",$(a)).after("<tr>"+$(o).html()+"</tr>")}),$(document).on("click","a.button.delete-table-row",function(t){t.preventDefault();var e=$(this),a=$(this).closest("tr");$(a).remove()}),$("body.wpzinc").on("change","input[name=toggle]",function(t){$(this).is(":checked")?$("ul.categorychecklist input[type=checkbox]").prop("checked",!0):$("ul.categorychecklist input[type=checkbox]").prop("checked",!1)})});